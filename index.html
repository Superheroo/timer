<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="telephone=no" name="format-detection" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="viewport" content="width=320, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <script type="text/javascript">
        function $id(element) {
            return document.getElementById(element);
        }
    </script>
</head>
<body bgcolor="#FFFFFF">
    <div class="time">
        <div>剩余时间：
            <font id="end_timeB" class="timeBox"></font>
        </div>
    </div>
        <script type="text/javascript">
            function countDown(fn) {
                var timer = setInterval(function () {
                    var huoDate = new Date();
                    // 结束时间
                    var enddatetime = "2018-" + (huoDate.getMonth() + 1) + "-" + huoDate.getDate() + "-59-59-59";
                    // 用-切割
                    var end_date = enddatetime.split('-');
                    var endtime = new Date(end_date[0], end_date[1] - 1, end_date[2], end_date[3], end_date[4], end_date[5]);
                    function GetRTime() {
                        NowTime = new Date();
                        var nMS = endtime - NowTime.getTime();
                        console.log('时间戳'+nMS)
                        var nD = Math.floor(nMS / (1000 * 60 * 60 * 24));//天
                        console.log('天'+nD)
                        var nH = Math.floor(nMS / (1000 * 60 * 60)) % 24 - 1;//时
                        console.log('时'+nH)
                        var nM = Math.floor(nMS / (1000 * 60)) % 60;//分
                        console.log('分'+nM)
                        var nS = Math.floor(nMS / 1000) % 60; //秒
                        console.log('秒'+nS)
                        var nMS = Math.floor(nMS % 1000) % 10;//毫秒
                        console.log('毫秒'+nMS)
                        if (nD >= 0) {
                            nH = (nH + 1) % 24;
                            fn("<strong>" + nH + "小时</strong><strong>" + nM + "分钟</strong><strong>" + nS + "." + nMS + "秒</strong>");
                        }
                        else {
                            fn("<strong>活动结束</strong>");
                        }
                    }
                    GetRTime();
                }, 1000);
            }
            countDown(function (msg) {
                document.getElementById('end_timeB').innerHTML = msg;
            })
        </script>
</body>